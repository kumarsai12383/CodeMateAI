<!DOCTYPE html>
<html lang="en">
  <head>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      crossorigin="anonymous"
    />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CodeMateAI</title>
    <link rel="icon" type="image/png" href="edu_logo-welcome.png" />
    <link rel="stylesheet" href="welcome.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    />
    <style>
      body {
        background: linear-gradient(120deg, #e0eafc 0%, #cfdef3 100%);
        min-height: 100vh;
      }
      h1 {
        font-weight: 700;
        color: #2c3e50;
        letter-spacing: 1px;
      }
      .card {
        border: none;
        border-radius: 1rem;
        transition: transform 0.2s, box-shadow 0.2s;
        background: #fff;
      }
      .card:hover {
        transform: translateY(-8px) scale(1.03);
        box-shadow: 0 8px 32px rgba(44, 62, 80, 0.15);
      }
      .card-title {
        color: #007bff;
        font-weight: 600;
        font-size: 1.25rem;
      }
      .card-text {
        color: #34495e;
        font-size: 1rem;
      }
      .btn-primary {
        background: linear-gradient(90deg, #007bff 0%, #00c6ff 100%);
        border: none;
        font-weight: 500;
        box-shadow: 0 2px 8px rgba(0, 123, 255, 0.12);
      }
      .btn-primary:hover {
        background: linear-gradient(90deg, #0056b3 0%, #00aaff 100%);
      }
      .row.g-4 {
        margin-top: 2rem;
      }
    </style>
  </head>
  <body>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var sidebar = document.getElementById("sidebarMenu");
        var closeBtn = document.getElementById("sidebarClose");
        var toggleBtn = document.querySelector(".navbar-toggler");
        // Only toggle sidebar on mobile
        function isMobile() {
          return window.innerWidth < 768;
        }
        if (toggleBtn && sidebar) {
          toggleBtn.addEventListener("click", function (e) {
            e.preventDefault();
            if (isMobile()) {
              sidebar.classList.add("active");
            }
          });
        }
        if (closeBtn && sidebar) {
          closeBtn.addEventListener("click", function (e) {
            e.preventDefault();
            if (isMobile()) {
              sidebar.classList.remove("active");
            }
          });
        }
        // Close sidebar when clicking a nav link (mobile only)
        var navLinks = sidebar.querySelectorAll(".nav-link");
        navLinks.forEach(function (link) {
          link.addEventListener("click", function () {
            if (isMobile()) {
              sidebar.classList.remove("active");
            }
          });
        });
      });
    </script>
    <div class="container-fluid" style="background: #f5f7fa; min-height: 100vh">
      <div class="row">
        <!-- Sidebar: Responsive, custom toggle -->
        <div id="sidebarMenu" class="sidebar-menu">
          <div
            class="sidebar-header d-flex d-md-none justify-content-between align-items-center px-3 py-2"
            style="border-bottom: 1px solid #e0e0e0"
          >
            <span style="font-weight: 600; color: #1976d2"></span>
            <button
              id="sidebarClose"
              class="btn btn-sm btn-outline-secondary"
              aria-label="Close sidebar"
            >
              <i class="fa fa-times" style="font-size: 1.5rem"></i>
            </button>
          </div>
          <div class="d-flex flex-column align-items-center mb-4 pt-3">
            <img
              src="edu_logo-welcome.png"
              alt="EduSkills Academy"
              style="width: 120px"
            />
          </div>
          <ul class="nav flex-column">
            <li class="nav-item mb-2">
              <a
                class="nav-link"
                style="
                 color: #34495e; font-weight: 500
                "
                href="courses.html"
                >COURSES</a
              >
            </li>
            <li class="nav-item mb-2">
              <a
                class="nav-link"
                style=" color: #1976d2;
                  font-weight: 600;
                  background: #e3eafc;
                  border-radius: 8px;"
                href="web development.html"
                >WEB DEVELOPMENT</a
              >
            </li>
           
            </li><li class="nav-item mb-2">
              <a
                class="nav-link"
                style="color: #34495e; font-weight: 500"
                href="#"
                >MORE WILL ADD SOON!</a
              >
            </li>
          </ul>
        </div>
        <!-- Topbar for mobile toggle -->
        <header
          class="navbar navbar-light bg-white d-md-none px-3"
          style="border-bottom: 1px solid #e0e0e0"
        >
          <button
            class="navbar-toggler"
            type="button"
            id="sidebarToggle"
            aria-label="Toggle navigation"
            style="display: inline-block"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <span class="navbar-brand mb-0 h1">Popular Courses</span>
        </header>
        <style>
          .sidebar-menu {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 240px;
            background: #fff;
            border-right: 1px solid #e0e0e0;
            z-index: 1040;
            transition: transform 0.3s ease;
          }
          @media (max-width: 767.98px) {
            .sidebar-menu {
              transform: translateX(-100%);
            }
            .sidebar-menu.active {
              transform: translateX(0);
            }
            main {
              padding-top: 56px !important;
            }
          }
          @media (min-width: 768px) {
            .sidebar-menu {
              transform: none !important;
            }
          }
        </style>
        <script>
          // Sidebar toggle for mobile
          document.addEventListener("DOMContentLoaded", function () {
            var sidebar = document.getElementById("sidebarMenu");
            var toggleBtn = document.getElementById("sidebarToggle");
            var closeBtn = document.getElementById("sidebarClose");
            if (toggleBtn && sidebar) {
              toggleBtn.addEventListener("click", function (e) {
                e.preventDefault();
                sidebar.classList.add("active");
                toggleBtn.style.display = "none";
              });
            }
            if (closeBtn && sidebar) {
              closeBtn.addEventListener("click", function (e) {
                e.preventDefault();
                sidebar.classList.remove("active");
                toggleBtn.style.display = "inline-block";
              });
            }
            // Close sidebar when clicking a nav link (mobile only)
            var navLinks = sidebar.querySelectorAll(".nav-link");
            navLinks.forEach(function (link) {
              link.addEventListener("click", function () {
                if (window.innerWidth < 768) {
                  sidebar.classList.remove("active");
                  toggleBtn.style.display = "inline-block";
                }
              });
            });
          });
        </script>
        <!-- Main Content -->
        <main
          class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-5"
          style="margin-left: auto"
        >
         <div class="d-flex align-items-center justify-content-center mt-2 mb-2" style="font-size: 1rem; color: #d97706;">
              <span class="me-2" style="display: inline-block; vertical-align: middle;">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-circle" viewBox="0 0 16 16">
                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                  <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
                </svg>
              </span>
              <span style="font-size: 0.98rem;">Get your certificate after completing all courses</span>
            </div>
          <h1 class="mb-4 text-center d-none d-md-block">Web Development Courses</h1>
          <div class="row g-4">
            <!-- Web Development -->
            <div class="col-md-4">
              <div class="card h-100 shadow-sm mb-4">
                <div class="card-body">
                  <img src="web beginner.jpg" class="w-100">
                  <h5 class="card-title">Web Development - Beginner</h5>
                  <p class="card-text">
                    Start with HTML, CSS, and basic JavaScript. Build simple
                    websites and learn responsive design.
                  </p>
                  <a
                    href="web-beginner-html.html"
                    class="btn btn-primary"
                    id="enroll-web-beginner"
                    >Enroll Beginner course</a
                  >
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card h-100 shadow-sm mb-4">
                <div class="card-body">
                  <img src="web inter.jpg" class="w-100">
                  <h5 class="card-title">Web Development - Intermediate</h5>
                  <p class="card-text">
                    Master frameworks like React, Vue, or Angular. Work with
                    APIs and build dynamic web apps.
                  </p>
                  <a
                    href="web-intermediate-html.html"
                    class="btn btn-primary"
                    id="enroll-web-intermediate"
                    >Enroll Intermediate course</a
                  >
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card h-100 shadow-sm mb-4">
                <div class="card-body">
                  <img src="web advanced.jpg" class="w-100">
                  <h5 class="card-title">Web Development - Advanced</h5>
                  <p class="card-text">
                    Learn DevOps, scalable architectures, security, and
                    contribute to open source projects.
                  </p>
                  <a
                    href="web-advanced-nodejs.html"
                    class="btn btn-primary"
                    id="enroll-web-advanced"
                    >Enroll Advanced course</a
                  >
                </div>
              </div>
            </div>
           
      </div>
      <!-- Add this button after your course cards, before the Back to Home button -->
      <div class="text-center my-4">
        <button id="viewCertificateBtn" class="btn btn-warning" disabled>View Certificate</button>
      </div>
      <div class="d-flex justify-content-end flex-row fixed-bottom p-3">
        <a href="welcome.html" class="btn btn-primary">Back to Home</a>
      </div>
      <footer
        class="text-secondary text-center py-3"
        style="
          background: #fff;
          border-top: 1px solid #e0e0e0;
          margin-top: 2rem;
        "
      >
        © 2025, <strong>CodeMateAI Foundation</strong>
      </footer>
    </div>

    <script>
      // Enroll/View Course button logic
      const courseButtons = [
        {
          id: "enroll-web-beginner",
          course: {
            id: "web-beginner",
            title: "Web Development - Beginner",
            desc: "Start with HTML, CSS, and basic JavaScript. Build simple websites and learn responsive design.",
          },
        },
        {
          id: "enroll-web-intermediate",
          course: {
            id: "web-intermediate",
            title: "Web Development - Intermediate",
            desc: "Master frameworks like React, Vue, or Angular. Work with APIs and build dynamic web apps.",
          },
        },
        {
          id: "enroll-web-advanced",
          course: {
            id: "web-advanced",
            title: "Web Development - Advanced",
            desc: "Learn DevOps, scalable architectures, security, and contribute to open source projects.",
          },
        },
        {
          id: "enroll-ds-beginner",
          course: {
            id: "ds-beginner",
            title: "Data Science - Beginner",
            desc: "Learn Python or R basics, data wrangling, and simple visualizations.",
          },
        },
        {
          id: "enroll-ds-intermediate",
          course: {
            id: "ds-intermediate",
            title: "Data Science - Intermediate",
            desc: "Master Pandas, NumPy, Matplotlib, and start with machine learning algorithms.",
          },
        },
        {
          id: "enroll-ds-advanced",
          course: {
            id: "ds-advanced",
            title: "Data Science - Advanced",
            desc: "Deep learning, NLP, Kaggle competitions, and advanced ML projects.",
          },
        },
      ];
      function getLearnings() {
        return JSON.parse(localStorage.getItem("myLearnings") || "[]");
      }
      function addToLearnings(course) {
        let learnings = getLearnings();
        if (!learnings.some((c) => c.id === course.id)) {
          learnings.push(course);
          localStorage.setItem("myLearnings", JSON.stringify(learnings));
        }
      }
      function updateButtons() {
        let learnings = getLearnings();
        courseButtons.forEach(({ id, course }) => {
          const btn = document.getElementById(id);
          if (!btn) return;
          if (learnings.some((c) => c.id === course.id)) {
            btn.textContent = "View Course";
            btn.classList.remove("btn-primary");
            btn.classList.add("btn-success");
            btn.onclick = function () {
              // Redirect to the correct course page
              if (course.id === "web-beginner") {
                window.location.href = "web-beginner-html.html";
              } else if (course.id === "web-intermediate") {
                window.location.href = "web-beginner-css.html";
              } else if (course.id === "web-advanced") {
                window.location.href = "web-beginner-js.html";
              } else {
                window.location.href = "courses.html";
              }
            };
          } else {
            btn.textContent = id.includes("web")
              ? `Enroll ${course.title.split(" - ")[1]} course`
              : `Enroll ${course.title.split(" - ")[1]} course`;
            btn.classList.remove("btn-success");
            btn.classList.add("btn-primary");
            btn.onclick = function () {
              addToLearnings(course);
              updateButtons();
              window.location.href = "my-learnings.html";
            };
          }
        });
      }
      updateButtons();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <style>
      @media (max-width: 767.98px) {
        #sidebarMenu {
          position: fixed;
          top: 0;
          left: 0;
          height: 100vh;
          width: 70vw;
          max-width: 320px;
          z-index: 1040;
        }
        main {
          padding-top: 56px !important;
        }
      }
      @media (max-width: 991.98px) {
        .card {
          margin-bottom: 1.5rem;
        }
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
document.addEventListener('DOMContentLoaded', function() {
  // Progress keys for each level
  const beginnerKeys = ['htmlBeginner', 'cssBeginner', 'jsBeginner'];
  const intermediateKeys = ['html', 'css', 'bootstrap', 'js'];
  const advancedKeys = ['nodejs', 'mongodb', 'git']; // <-- FIXED HERE

  let allProgress = {};
  try {
    allProgress = JSON.parse(localStorage.getItem('allQuizProgress') || '{}');
  } catch (e) { allProgress = {}; }

  function allCoursesCompleted(keys, section) {
    if (!keys.length) return false;
    if (section && allProgress[section]) {
      return keys.every(key => allProgress[section][key] && allProgress[section][key].completed);
    }
    return keys.every(key => allProgress[key] && allProgress[key].completed);
  }

  // Beginner
  const beginnerCompleted = allCoursesCompleted(beginnerKeys);
  // Intermediate
  const intermediateCompleted = allCoursesCompleted(intermediateKeys, 'intermediate');
  // Advanced
  const advancedCompleted = allCoursesCompleted(advancedKeys, 'advanced');

  // Update Beginner Card
  const beginnerBtn = document.getElementById('enroll-web-beginner');
  if (beginnerBtn) {
    if (beginnerCompleted) {
      beginnerBtn.textContent = 'Completed';
      beginnerBtn.classList.remove('btn-primary', 'btn-success');
      beginnerBtn.classList.add('btn-secondary');
      beginnerBtn.disabled = true;
    } else {
      beginnerBtn.textContent = 'View Course';
      beginnerBtn.classList.remove('btn-secondary');
      beginnerBtn.classList.add('btn-success');
      beginnerBtn.disabled = false;
      beginnerBtn.onclick = function () {
        window.location.href = "web-beginner-html.html";
      };
    }
  }

  // Update Intermediate Card
  const intermediateBtn = document.getElementById('enroll-web-intermediate');
  if (intermediateBtn) {
    if (!beginnerCompleted) {
      intermediateBtn.textContent = 'Complete Beginner First';
      intermediateBtn.classList.remove('btn-primary', 'btn-success');
      intermediateBtn.classList.add('btn-secondary');
      intermediateBtn.disabled = true;
    } else if (intermediateCompleted) {
      intermediateBtn.textContent = 'Completed';
      intermediateBtn.classList.remove('btn-primary', 'btn-success');
      intermediateBtn.classList.add('btn-secondary');
      intermediateBtn.disabled = true;
    } else {
      intermediateBtn.textContent = 'View Course';
      intermediateBtn.classList.remove('btn-secondary');
      intermediateBtn.classList.add('btn-success');
      intermediateBtn.disabled = false;
      intermediateBtn.onclick = function () {
        window.location.href = "web-intermediate-html.html";
      };
    }
  }

  // Update Advanced Card
  const advancedBtn = document.getElementById('enroll-web-advanced');
  if (advancedBtn) {
    if (!beginnerCompleted || !intermediateCompleted) {
      advancedBtn.textContent = 'Complete Previous Levels';
      advancedBtn.classList.remove('btn-primary', 'btn-success');
      advancedBtn.classList.add('btn-secondary');
      advancedBtn.disabled = true;
    } else if (advancedCompleted) {
      advancedBtn.textContent = 'Completed';
      advancedBtn.classList.remove('btn-primary', 'btn-success');
      advancedBtn.classList.add('btn-secondary');
      advancedBtn.disabled = true;
    } else {
      advancedBtn.textContent = 'View Course';
      advancedBtn.classList.remove('btn-secondary');
      advancedBtn.classList.add('btn-success');
      advancedBtn.disabled = false;
      advancedBtn.onclick = function () {
        window.location.href = "web-advanced-nodejs.html";
      };
    }
  }

  // Enable or disable the View Certificate button
  const certBtn = document.getElementById('viewCertificateBtn');
  if (certBtn) {
    const allDone = beginnerCompleted && intermediateCompleted && advancedCompleted;
    certBtn.disabled = !allDone;
    certBtn.onclick = function() {
      if (allDone) {
        // Get user name from localStorage
        const profile = JSON.parse(localStorage.getItem("userProfile") || "{}");
        fetch('/api/certificate', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            name: profile.name,
            course: "Web Development", // Or set dynamically if needed
            date: new Date().toLocaleDateString()
          })
        })
        .then(res => res.blob())
        .then(blob => {
          const url = window.URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = "certificate.pdf";
          a.click();
          window.URL.revokeObjectURL(url);
        });
      }
    };
  }
});
</script>
  </body>
</html>
